(()=>{"use strict";var e,t={716:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(a(294)),r=n(a(14)),i=n(a(739)),o=n(a(575)),l=(e="Unknown System")=>`Chrome Terminal [Ver 1.0] on [${e}].\nAll rights reserved.`;class c extends s.default.Component{constructor(e){var t;super(e),this.state={caretTxt:"",devConsole:"-".repeat(16)+"non-production ENV, showing console:",commandHistory:[],commandHistoryMaxLength:100,currentURL:"",stdout:null!==(t=this.props.stdoutText)&&void 0!==t?t:l(),commandHistoryIndex:-1,isDev:Boolean(!1),commandInputFocused:!1,OSName:"Unknown System"},this.commandInput=s.default.createRef(),this.cmdExecutor=new o.default({setState:e=>{this.setState(e)},currentURL:this.state.currentURL}),this.echo=this.cmdExecutor.echo}componentDidMount(){chrome.runtime.getPlatformInfo((e=>{var t;t="win"==e.os?"Windows":e.os,this.setState({OSName:t})})),chrome.tabs.query({active:!0,currentWindow:!0},(e=>{var t;this.setState({currentURL:null!==(t=e[0].url)&&void 0!==t?t:"URL unavailable"})})),chrome.storage.sync.get(["commandHistory","commandHistoryMaxLength"],(({commandHistory:e=[],commandHistoryMaxLength:t=100})=>{this.setState((a=>({commandHistory:a.commandHistory.concat(e),commandHistoryMaxLength:t})))}))}componentDidUpdate(e,t){this.state.OSName!=t.OSName&&(this.props.stdoutText||this.setState({stdout:l(this.state.OSName)}))}consPush(e){this.setState((({devConsole:t})=>({devConsole:`${t}\n${t.split("\n").length+1}\t: ${e}`})))}focusCommandInput(){this.commandInput.current.focus()}handleCmdClick(e){e.target.focus(),e.preventDefault()}handleCmdChange(e){const t=this.commandInput.current;this.setState({caretTxt:t.value.slice(0,t.selectionStart)})}handleCmdExe(e){e.preventDefault();const t=this.commandInput.current,a=t.value;this.echo.f(`> ${a}`),t.value="",t.focus(),this.setState({caretTxt:t.value.slice(0,t.selectionStart)}),this.cmdExecutor.run(a)}handleCmdKeydown(e){const t=this.commandInput.current;let a=t.selectionStart;const n=t.value;if(a&&("ArrowLeft"==e.code&&this.setState({caretTxt:n.slice(0,a-1)}),"ArrowRight"==e.code&&this.setState({caretTxt:n.slice(0,a+1)}),e.shiftKey&&(t.selectionStart=a+1,t.selectionEnd=a+1)),["ArrowUp","ArrowDown"].includes(e.code)){e.preventDefault();const a=this.state.commandHistoryIndex,n=this.state.commandHistory.length-1;var s;s="ArrowUp"==e.code?-1==a?n:0==a?0:a-1:-1==a||a==n?n:a+1,t.value=this.state.commandHistory[s],this.setState({commandHistoryIndex:s,caretTxt:t.value.slice(0,t.selectionStart)})}}handleCmdSelect(e){}render(){return s.default.createElement(s.default.Fragment,null,s.default.createElement(i.default,{keyName:"alt+c",onKeyDown:this.focusCommandInput.bind(this)}),s.default.createElement("div",{className:"noscrollbar",style:{whiteSpace:"pre-wrap",overflowWrap:"anywhere",width:"100%",height:"100%",overflowY:"scroll"}},s.default.createElement("div",{className:"noscrollbar",style:{display:"flex",width:"100%",height:"100%",flexDirection:"column"}},s.default.createElement(r.default,{text:this.state.stdout,onClick:e=>{var t;(null===(t=document.getSelection())||void 0===t?void 0:t.toString())||this.focusCommandInput()}}),s.default.createElement("form",{autoComplete:"off",onSubmit:this.handleCmdExe.bind(this),style:{display:"flex",justifyContent:"space-between",alignContent:"center"}},s.default.createElement("div",{id:"commandInput-total-container",style:{flexGrow:1,backgroundColor:"#000000",position:"relative"}},s.default.createElement("div",{id:"caret-layer",style:{position:"absolute",display:"flex",whiteSpace:"pre"}},"> "+this.state.caretTxt,s.default.createElement("div",{id:"caret-mover",style:{position:"relative"}},this.state.commandInputFocused&&s.default.createElement("div",{className:"caret",style:{position:"absolute",left:"3px",zIndex:1,whiteSpace:"pre"}}," "))),s.default.createElement("div",{style:{width:"100%",position:"absolute",display:"flex"}},">"," ",s.default.createElement("input",{type:"text",autoFocus:!0,ref:this.commandInput,onFocus:e=>this.setState({commandInputFocused:!0}),onBlur:e=>this.setState({commandInputFocused:!1}),onChange:e=>this.handleCmdChange(e),onKeyDown:this.handleCmdKeydown.bind(this),onMouseDown:e=>this.handleCmdClick(e),placeholder:"Command line: Use [ALT]+[C] to set focus here.",style:{width:"99%",backgroundColor:"#000000",caretColor:"transparent",flexGrow:1}}))),s.default.createElement("input",{type:"submit",value:"⏎",style:{padding:0,flexBasis:0,backgroundColor:"#eee",color:"#000"}})),s.default.createElement("div",{style:{display:"flex",alignItems:"baseline"}},s.default.createElement("div",{style:{width:"33%",flexShrink:0}},(new Date).toLocaleTimeString()),s.default.createElement("div",{style:{flexShrink:0,cursor:"pointer"},onClick:()=>{this.state.currentURL?(navigator.clipboard.writeText(this.state.currentURL),this.echo.f("Current URL copied.")):this.echo.f("[Error]: No current URL found.")}},"COPY URL:"),s.default.createElement("div",{style:{font:"12px sans-serif",overflow:"hidden",height:"32px",overflowWrap:"anywhere",alignSelf:"flex-start"}},this.state.currentURL))),s.default.createElement("div",{style:{font:"12px sans-serif"}},this.state.isDev&&s.default.createElement(s.default.Fragment,null,s.default.createElement("button",null,"test"),s.default.createElement("div",{style:{whiteSpace:"pre-wrap"}},this.state.devConsole)))))}}t.default=c},14:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=r(a(294));t.default=e=>{const t=i.useRef(null);return i.useEffect((()=>{t.current.scrollIntoView({behavior:"auto",block:"end"})}),[e.text]),i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{style:{overflowY:"scroll",height:"100%",overflowWrap:"anywhere"},className:"noscrollbar",onClick:e.onClick},i.default.createElement("div",null,e.text),i.default.createElement("div",{ref:t})))}},898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.aliasObj=void 0,t.aliasObj=class{constructor(e){this.name=e.name,this.s=e.s,this.aliasType=e.aliasType,this.comment=e.comment}}},575:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=a(593),s=a(898);class r{constructor(e){this.name=e.name,this.f=e.f,this.prebuilt=e.prebuilt,this.manShort=e.manShort,this.manFull=e.manFull}}const i=e=>{console.log("fake setState",e)};t.default=class{constructor({setState:e=i,currentURL:t="URL unavailable"}={setState:i,currentURL:"URL unavailable"}){this.aliasNameMaxLength=12,this.hasSetState=!1,this.userAliases={$URL:new s.aliasObj({name:"$URL",s:["URL unavailable"],aliasType:"prebuilt",comment:"Prebuilt environment variable. URL of current page."})},this.echo=new r({name:"echo",f:e=>{this.setState((({stdout:t})=>({stdout:`${t}\n${e}`})))},prebuilt:!0,manShort:"Show thing on screen",manFull:"ECHO [string text]"}),this.basicCmds={alias:new r({name:"alias",f:e=>{if(e){const[t,...a]=e.trim().split("="),n=a.join("=");if(n){if(this.checkAlias(n.split(" "))){const e={name:t,s:n.split(" "),aliasType:"user-defined",comment:`added on ${Date()}`};Object.assign(this.userAliases,{[t]:e});const a=Object.assign({},this.userAliases);Reflect.deleteProperty(a,"$URL"),chrome.storage.sync.set({userAliases:a}),this.echo.f(`alias ${t} for ${n} added. \nYou can edit it in option page [EXPORT]`)}}else this.echo.f(`[${t}] is an alias: ${this.userAliases[t].comment}\nalias for [${this.userAliases[t].s.join(" ")}] `)}else{const e=(e,t)=>`${e}${(t.name+" ".repeat(this.aliasNameMaxLength+4)).slice(0,this.aliasNameMaxLength+4)}${t.comment}\n`,t=Object.values(this.userAliases).reduce(e,"");this.echo.f(`All Alias:\n${t}`)}},prebuilt:!0,manShort:"Make new alias or check exsisted alias",manFull:"ALIAS [value(=value)]"}),copy:new r({name:"copy",f:e=>{this.echo.f(`copied ${e.slice(0,20)}${e.length>20?" (... omitted)":""}`),navigator.clipboard.writeText(e)},prebuilt:!0,manShort:"Make new alias or check exsisted alias",manFull:"ALIAS [name(=value)]"}),echo:this.echo,edit:new r({name:"edit",f:e=>{e||chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const t=e[0];chrome.tabs.executeScript(t.id,{code:"document.designMode='on'"},(e=>{if(chrome.runtime.lastError){var t=chrome.runtime.lastError.message;console.log("errorMsg : ",t),this.echo.f(null!=t?t:""),chrome.permissions.request({permissions:["tabs"],origins:[this.userAliases.$URL.s[0]]},(e=>{e?(this.echo.f("Permission granted."),this.basicCmds.edit.f()):console.log("Permission denied. You cannot use this command.")}))}else"on"==e[0]&&this.echo.f("You can edit current page now.")}))}))},prebuilt:!0,manShort:"Show manual",manFull:"MAN [command name]\n        \n        Has alias: help\n        For more help, use OPTION HELP"}),man:new r({name:"man",f:e=>{var t,a,n;if(e){const s=null!==(n=null===(a=null!==(t=this.basicCmds[e])&&void 0!==t?t:this.userAliases[e])||void 0===a?void 0:a.manFull)&&void 0!==n?n:"no such function";this.echo.f(`${" ".repeat(15)}MANUAL - ${e}:\n${s}`)}else{const e=Object.keys(this.basicCmds).join("\t"),t=Object.keys(this.userAliases).join("\t");this.echo.f(`Commands:\necho\t${e}\nAliases:\n${t}`)}},prebuilt:!0,manShort:"Show manual",manFull:"MAN [command name]\n        \n        Has alias: help\n        For more help, use OPTION HELP"}),open:new r({name:"open",f:e=>{e?chrome.tabs.query({active:!1,url:e,windowId:-2},(t=>{t.length?(chrome.tabs.highlight({tabs:t.map((e=>e.index))}),chrome.tabs.getCurrent((e=>{chrome.tabs.remove(e.id,(function(){}))}))):chrome.tabs.create({url:e})})):this.echo.f("ERROR: needs an URL.")},prebuilt:!0,manShort:"OPEN [URL] : Open an URL",manFull:"OPEN [URL]"})},e!=i&&(this.hasSetState=!0),this.commandHistoryMaxLength=100,chrome.storage.sync.get(["aliasNameMaxLength","userAliases","commandHistoryMaxLength"],(({aliasNameMaxLength:e=12,userAliases:t={},commandHistoryMaxLength:a=100})=>{this.aliasNameMaxLength=e,Object.assign(this.userAliases,t),this.commandHistoryMaxLength=a})),this.setState=e,chrome.tabs.query({active:!0,currentWindow:!0},(e=>{var a;this.userAliases.$URL.s[0]=null!==(a=e[0].url)&&void 0!==a?a:t}))}checkAlias(e){const t="Error in parseAlias: Max alias depth exceeded",a=this.parseAlias(e,256);if(("string"==typeof a||a instanceof String)&&a.startsWith(t))return this.echo.f("WARNING: Alias has more than 256 levels of referece, please check for circular reference."),!1;const n=this.parseAlias(e,64);return!("string"==typeof n||n instanceof String)||!n.startsWith(t)||(this.echo.f("WARNING: Alias has more than 64 levels of referece, please consider flatten the alias."),!1)}parseAlias(e,t=256){let a=0;for(;a<t;){let t=e.flatMap((e=>{var t,a;return null!==(a=null===(t=this.userAliases[e])||void 0===t?void 0:t.s)&&void 0!==a?a:e}));if(n.arrayEqual(e,t))return{parsed:t,status:0==a?"UNCHANGED":"PARSED"};e=t,a+=1}return{parsed:[`Error in parseAlias: Max alias depth exceeded :(${t}) times`],status:"ERROR"}}formatCmdTxt(e){if(""==e.trim())return;const t=e.split(" "),[a,...n]="alias"==t[0]?[t[0],t.slice(1).join(" ")]:this.parseAlias(t).parsed;return{command:a,params:n,status:this.parseAlias(t).status}}updateHistory(e){chrome.storage.sync.get("commandHistory",(({commandHistory:t})=>{const a=t.concat([e]).slice(-this.commandHistoryMaxLength);chrome.storage.sync.set({commandHistory:a}),this.setState({commandHistory:a,commandHistoryIndex:-1}),console.log("newHist : ",a)}))}run(e){if(null==this.formatCmdTxt(e))return;this.updateHistory(e);const{command:t,params:a}=this.formatCmdTxt(e);t in this.basicCmds?this.basicCmds[t].f(...a):this.echo.f(`${e} is not a command`)}}},593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.arrayUnique=t.arrayEqual=void 0,t.arrayEqual=function(e,t){return e.length==t.length&&!e.find(((e,a)=>e!=t[a]))},t.arrayUnique=function(e){return[...new Set(e)]}},792:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return s(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(a(294)),l=i(a(935)),c=i(a(739)),u=i(a(716));l.default.render(o.default.createElement(o.default.StrictMode,null,o.default.createElement((()=>{const[e,t]=o.useState([]),[a,n]=o.useState([]);return o.useEffect((()=>{var e=0;function a(t){const a=10!=(e+=1)?e:0,n=`alt+${a}`;return o.default.createElement("a",{href:t.url,style:{textDecoration:"none"},key:e},o.default.createElement("div",{className:"onhoverbcgto333",style:{userSelect:"none",margin:"10px 10px",padding:"15px 5px",cursor:"pointer",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"space-between"}},o.default.createElement("div",{style:{borderRadius:"50%",height:"32px",width:"32px",backgroundColor:"#333",marginRight:"10px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}},o.default.createElement("img",{draggable:"false",src:`chrome://favicon/${t.url}`,style:{height:"16px",width:"16px"}})),e<=10&&o.default.createElement(c.default,{keyName:n,onKeyDown:()=>{window.location.href=t.url},filter:()=>!0},o.default.createElement("kbd",null,"ALT"),o.default.createElement("kbd",{style:{marginRight:"10px"}},a)),o.default.createElement("div",{style:{position:"initial",flex:1,overflowWrap:"anywhere",overflowY:"hidden",height:"1.2em",font:"18px sans-serif"}},t.title.split(":")[0].split("-")[0].trim())))}chrome.storage.sync.get("fixedSites",(({fixedSites:e})=>{n(e.map(((e,t)=>a(e)))),chrome.topSites.get((e=>{t(e.map(a))}))}))}),[]),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{style:{height:"100%",display:"flex",flexDirection:"row"}},o.default.createElement("div",{className:"noscrollbar",style:{width:"20%",minHeight:"100%",background:"#111",overflowX:"hidden",overflowY:"scroll"}},a,o.default.createElement("hr",null),e),o.default.createElement("div",{style:{width:"80%",height:"100%",boxSizing:"border-box",border:"8px transparent solid"}},o.default.createElement(u.default,null))))}),null)),document.getElementById("root"))}},a={};function n(e){var s=a[e];if(void 0!==s)return s.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,s,r)=>{if(!a){var i=1/0;for(u=0;u<e.length;u++){for(var[a,s,r]=e[u],o=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](a[l])))?a.splice(l--,1):(o=!1,r<i&&(i=r));if(o){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,s,r]},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=532,(()=>{var e={532:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var s,r,[i,o,l]=a,c=0;for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)var u=l(n);for(t&&t(a);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[i[c]]=0;return n.O(u)},a=self.webpackChunkchrome_terminal=self.webpackChunkchrome_terminal||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var s=n.O(void 0,[736],(()=>n(792)));s=n.O(s)})();